{{ define "main" }}
<div class="relative max-w-3xl mx-auto mt-8">
<a href="/" class="inline-block mb-4 px-4 py-2 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-white rounded hover:bg-blue-200 dark:hover:bg-blue-700 transition">
  ‚¨Ö Quay v·ªÅ trang ch·ªß
</a>


  <input type="text" id="searchInput" placeholder="üîç Nh·∫≠p t·ª´ kh√≥a..." class="w-full p-3 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500">
  <ul id="searchResults" class="mt-4 space-y-2"></ul>
</div>

<script>
fetch('/index.json')
  .then(res => res.json())
  .then(data => {
    const input = document.getElementById('searchInput');
    const results = document.getElementById('searchResults');

    input.addEventListener('input', () => {
      const keyword = input.value.toLowerCase();
      results.innerHTML = '';

      if (keyword.length > 1) {
        const matches = data.filter(post =>
          post.title.toLowerCase().includes(keyword) ||
          (post.profile && post.profile.toLowerCase().includes(keyword)) ||
          (post.component && post.component.toLowerCase().includes(keyword))
        );

        if (matches.length === 0) {
          results.innerHTML = '<li class="text-gray-500 dark:text-gray-400">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£.</li>';
        } else {
          matches.forEach(post => {
            const li = document.createElement('li');
            li.innerHTML = `<a href="${post.url}" class="font-medium text-blue-600 dark:text-blue-400 hover:underline">${post.title}</a>`;
            results.appendChild(li);
          });
        }
      }
    });
  })
  .catch(error => {
    console.error('L·ªói khi t·∫£i d·ªØ li·ªáu t√¨m ki·∫øm:', error);
  });
</script>
{{ end }}
